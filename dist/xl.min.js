!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.XL=e()}}(function(){return function e(n,t,o){function r(i,s){if(!t[i]){if(!n[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=t[i]={exports:{}};n[i][0].call(u.exports,function(e){var t=n[i][1][e];return r(t?t:e)},u,u.exports,e,n,t,o)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(e,n,t){!function(e,n,t,o,r,a){function i(e,n){var t=typeof e[n];return"function"==t||!("object"!=t||!e[n])||"unknown"==t}function s(e,n){return!("object"!=typeof e[n]||!e[n])}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(){var e="Shockwave Flash",n="application/x-shockwave-flash";if(!w(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var t=navigator.plugins[e].description;t&&!w(navigator.mimeTypes)&&navigator.mimeTypes[n]&&navigator.mimeTypes[n].enabledPlugin&&(M=t.match(/\d+/g))}if(!M){var o;try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),M=Array.prototype.slice.call(o.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),o=null}catch(r){}}if(!M)return!1;var a=parseInt(M[0],10),i=parseInt(M[1],10);return S=a>9&&i>0,!0}function u(){if(!J){J=!0;for(var e=0;e<q.length;e++)q[e]();q.length=0}}function p(e,n){return J?void e.call(n):void q.push(function(){e.call(n)})}function d(){var e=parent;if(""!==U)for(var n=0,t=U.split(".");n<t.length;n++)e=e[t[n]];return e.easyXDM}function f(n){return e.easyXDM=F,U=n,U&&(B="easyXDM_"+U.replace(".","_")+"_"),H}function h(e){return e.match(L)[3]}function m(e){return e.match(L)[4]||""}function g(e){var n=e.toLowerCase().match(L),t=n[2],o=n[3],r=n[4]||"";return("http:"==t&&":80"==r||"https:"==t&&":443"==r)&&(r=""),t+"//"+o+r}function v(e){if(e=e.replace(D,"$1/"),!e.match(/^(http||https):\/\//)){var n="/"===e.substring(0,1)?"":t.pathname;"/"!==n.substring(n.length-1)&&(n=n.substring(0,n.lastIndexOf("/")+1)),e=t.protocol+"//"+t.host+n+e}for(;j.test(e);)e=e.replace(j,"");return e}function y(e,n){var t="",o=e.indexOf("#");-1!==o&&(t=e.substring(o),e=e.substring(0,o));var r=[];for(var i in n)n.hasOwnProperty(i)&&r.push(i+"="+a(n[i]));return e+(X?"#":-1==e.indexOf("?")?"?":"&")+r.join("&")+t}function w(e){return"undefined"==typeof e}function _(e,n,t){var o;for(var r in n)n.hasOwnProperty(r)&&(r in e?(o=n[r],"object"==typeof o?_(e[r],o,t):t||(e[r]=n[r])):e[r]=n[r]);return e}function b(){var e=n.body.appendChild(n.createElement("form")),t=e.appendChild(n.createElement("input"));t.name=B+"TEST"+A,E=t!==e.elements[t.name],n.body.removeChild(e)}function x(e){w(E)&&b();var t;E?t=n.createElement('<iframe name="'+e.props.name+'"/>'):(t=n.createElement("IFRAME"),t.name=e.props.name),t.id=t.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=n.getElementById(e.container)),e.container||(_(t.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=n.body);var o=e.props.src;if(e.props.src="javascript:false",_(t,e.props),t.border=t.frameBorder=0,t.allowTransparency=!0,e.container.appendChild(t),e.onLoad&&C(t,"load",e.onLoad),e.usePost){var r,a=e.container.appendChild(n.createElement("form"));if(a.target=t.name,a.action=o,a.method="POST","object"==typeof e.usePost)for(var i in e.usePost)e.usePost.hasOwnProperty(i)&&(E?r=n.createElement('<input name="'+i+'"/>'):(r=n.createElement("INPUT"),r.name=i),r.value=e.usePost[i],a.appendChild(r));a.submit(),a.parentNode.removeChild(a)}else t.src=o;return e.props.src=o,t}function k(e,n){"string"==typeof e&&(e=[e]);for(var t,o=e.length;o--;)if(t=e[o],t=new RegExp("^"==t.substr(0,1)?t:"^"+t.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),t.test(n))return!0;return!1}function O(o){var r,a=o.protocol;if(o.isHost=o.isHost||w(z.xdm_p),X=o.hash||!1,o.props||(o.props={}),o.isHost)o.remote=v(o.remote),o.channel=o.channel||"default"+A++,o.secret=Math.random().toString(16).substring(2),w(a)&&(a=g(t.href)==g(o.remote)?"4":i(e,"postMessage")||i(n,"postMessage")?"1":o.swf&&i(e,"ActiveXObject")&&l()?"6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?"5":o.remoteHelper?"2":"0");else if(o.channel=z.xdm_c.replace(/["'<>\\]/g,""),o.secret=z.xdm_s,o.remote=z.xdm_e.replace(/["'<>\\]/g,""),a=z.xdm_p,o.acl&&!k(o.acl,o.remote))throw new Error("Access denied for "+o.remote);switch(o.protocol=a,a){case"0":if(_(o,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),o.isHost){if(!o.local){for(var s,c=t.protocol+"//"+t.host,u=n.body.getElementsByTagName("img"),p=u.length;p--;)if(s=u[p],s.src.substring(0,c.length)===c){o.local=s.src;break}o.local||(o.local=e)}var d={xdm_c:o.channel,xdm_p:0};o.local===e?(o.usePolling=!0,o.useParent=!0,o.local=t.protocol+"//"+t.host+t.pathname+t.search,d.xdm_e=o.local,d.xdm_pa=1):d.xdm_e=v(o.local),o.container&&(o.useResize=!1,d.xdm_po=1),o.remote=y(o.remote,d)}else _(o,{useParent:!w(z.xdm_pa),usePolling:!w(z.xdm_po),useResize:o.useParent?!1:o.useResize});r=[new H.stack.HashTransport(o),new H.stack.ReliableBehavior({}),new H.stack.QueueBehavior({encode:!0,maxLength:4e3-o.remote.length}),new H.stack.VerifyBehavior({initiate:o.isHost})];break;case"1":r=[new H.stack.PostMessageTransport(o)];break;case"2":o.isHost&&(o.remoteHelper=v(o.remoteHelper)),r=[new H.stack.NameTransport(o),new H.stack.QueueBehavior,new H.stack.VerifyBehavior({initiate:o.isHost})];break;case"3":r=[new H.stack.NixTransport(o)];break;case"4":r=[new H.stack.SameOriginTransport(o)];break;case"5":r=[new H.stack.FrameElementTransport(o)];break;case"6":M||l(),r=[new H.stack.FlashTransport(o)]}return r.push(new H.stack.QueueBehavior({lazy:o.lazy,remove:!0})),r}function R(e){for(var n,t={incoming:function(e,n){this.up.incoming(e,n)},outgoing:function(e,n){this.down.outgoing(e,n)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},o=0,r=e.length;r>o;o++)n=e[o],_(n,t,!0),0!==o&&(n.down=e[o-1]),o!==r-1&&(n.up=e[o+1]);return n}function T(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var E,M,S,C,N,P=this,A=Math.floor(1e4*Math.random()),I=Function.prototype,L=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,j=/[\-\w]+\/\.\.\//,D=/([^:])\/\//g,U="",H={},F=e.easyXDM,B="easyXDM_",X=!1;if(i(e,"addEventListener"))C=function(e,n,t){e.addEventListener(n,t,!1)},N=function(e,n,t){e.removeEventListener(n,t,!1)};else{if(!i(e,"attachEvent"))throw new Error("Browser not supported");C=function(e,n,t){e.attachEvent("on"+n,t)},N=function(e,n,t){e.detachEvent("on"+n,t)}}var W,J=!1,q=[];if("readyState"in n?(W=n.readyState,J="complete"==W||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==W||"interactive"==W)):J=!!n.body,!J){if(i(e,"addEventListener"))C(n,"DOMContentLoaded",u);else if(C(n,"readystatechange",function(){"complete"==n.readyState&&u()}),n.documentElement.doScroll&&e===top){var V=function(){if(!J){try{n.documentElement.doScroll("left")}catch(e){return void o(V,1)}u()}};V()}C(e,"load",u)}var z=function(e){e=e.substring(1).split("&");for(var n,t={},o=e.length;o--;)n=e[o].split("="),t[n[0]]=r(n[1]);return t}(/xdm_e=/.test(t.search)?t.search:t.hash),G=function(){var e={},n={a:[1,2,3]},t='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(n).replace(/\s/g,"")===t?JSON:(Object.toJSON&&Object.toJSON(n).replace(/\s/g,"")===t&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(n=t.evalJSON(),n.a&&3===n.a.length&&3===n.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(G=function(){return e},e):null)};_(H,{version:"2.4.20.7",query:z,stack:{},apply:_,getJSONObject:G,whenReady:p,noConflict:f}),H.DomHelper={on:C,un:N,requiresJSON:function(t){s(e,"JSON")||n.write('<script type="text/javascript" src="'+t+'"></script>')}},function(){var e={};H.Fn={set:function(n,t){e[n]=t},get:function(n,t){if(e.hasOwnProperty(n)){var o=e[n];return t&&delete e[n],o}}}}(),H.Socket=function(e){var n=R(O(e).concat([{incoming:function(n,t){e.onMessage(n,t)},callback:function(n){e.onReady&&e.onReady(n)}}])),t=g(e.remote);this.origin=g(e.remote),this.destroy=function(){n.destroy()},this.postMessage=function(e){n.outgoing(e,t)},n.init()},H.Rpc=function(e,n){if(n.local)for(var t in n.local)if(n.local.hasOwnProperty(t)){var o=n.local[t];"function"==typeof o&&(n.local[t]={method:o})}var r=R(O(e).concat([new H.stack.RpcBehavior(this,n),{callback:function(n){e.onReady&&e.onReady(n)}}]));this.origin=g(e.remote),this.destroy=function(){r.destroy()},r.init()},H.stack.SameOriginTransport=function(e){var n,r,a,i;return n={outgoing:function(e,n,t){a(e),t&&t()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){i=g(e.remote),e.isHost?(_(e.props,{src:y(e.remote,{xdm_e:t.protocol+"//"+t.host+t.pathname,xdm_c:e.channel,xdm_p:4}),name:B+e.channel+"_provider"}),r=x(e),H.Fn.set(e.channel,function(e){return a=e,o(function(){n.up.callback(!0)},0),function(e){n.up.incoming(e,i)}})):(a=d().Fn.get(e.channel,!0)(function(e){n.up.incoming(e,i)}),o(function(){n.up.callback(!0)},0))},init:function(){p(n.onDOMReady,n)}}},H.stack.FlashTransport=function(e){function r(e,n){o(function(){s.up.incoming(e,l)},0)}function i(t){var o=e.swf+"?host="+e.isHost,r="easyXDM_swf_"+Math.floor(1e4*Math.random());H.Fn.set("flash_loaded"+t.replace(/[\-.]/g,"_"),function(){H.stack.FlashTransport[t].swf=u=d.firstChild;for(var e=H.stack.FlashTransport[t].queue,n=0;n<e.length;n++)e[n]();e.length=0}),e.swfContainer?d="string"==typeof e.swfContainer?n.getElementById(e.swfContainer):e.swfContainer:(d=n.createElement("div"),_(d.style,S&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),n.body.appendChild(d));var i="callback=flash_loaded"+a(t.replace(/[\-.]/g,"_"))+"&proto="+P.location.protocol+"&domain="+a(h(P.location.href))+"&port="+a(m(P.location.href))+"&ns="+a(U);d.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+r+"' data='"+o+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+o+"'></param><param name='flashvars' value='"+i+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+i+"' allowScriptAccess='always' wmode='transparent' src='"+o+"' height='1' width='1'></embed></object>"}var s,c,l,u,d;return s={outgoing:function(n,t,o){u.postMessage(e.channel,n.toString()),o&&o()},destroy:function(){try{u.destroyChannel(e.channel)}catch(n){}u=null,c&&(c.parentNode.removeChild(c),c=null)},onDOMReady:function(){l=e.remote,H.Fn.set("flash_"+e.channel+"_init",function(){o(function(){s.up.callback(!0)})}),H.Fn.set("flash_"+e.channel+"_onMessage",r),e.swf=v(e.swf);var n=h(e.swf),a=function(){H.stack.FlashTransport[n].init=!0,u=H.stack.FlashTransport[n].swf,u.createChannel(e.channel,e.secret,g(e.remote),e.isHost),e.isHost&&(S&&e.swfNoThrottle&&_(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),_(e.props,{src:y(e.remote,{xdm_e:g(t.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:B+e.channel+"_provider"}),c=x(e))};H.stack.FlashTransport[n]&&H.stack.FlashTransport[n].init?a():H.stack.FlashTransport[n]?H.stack.FlashTransport[n].queue.push(a):(H.stack.FlashTransport[n]={queue:[a]},i(n))},init:function(){p(s.onDOMReady,s)}}},H.stack.PostMessageTransport=function(n){function r(e){if(e.origin)return g(e.origin);if(e.uri)return g(e.uri);if(e.domain)return t.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function a(e){if("string"==typeof e.data){var t=r(e);t==u&&e.data.substring(0,n.channel.length+1)==n.channel+" "&&s.up.incoming(e.data.substring(n.channel.length+1),t)}}function i(t){t.data==n.channel+"-ready"&&(l="postMessage"in c.contentWindow?c.contentWindow:c.contentWindow.document,N(e,"message",i),C(e,"message",a),o(function(){s.up.callback(!0)},0))}var s,c,l,u;return s={outgoing:function(e,t,o){l.postMessage(n.channel+" "+e,t||u),o&&o()},destroy:function(){N(e,"message",i),N(e,"message",a),c&&(l=null,c.parentNode.removeChild(c),c=null)},onDOMReady:function(){u=g(n.remote),n.isHost?(C(e,"message",i),_(n.props,{src:y(n.remote,{xdm_e:g(t.href),xdm_c:n.channel,xdm_p:1}),name:B+n.channel+"_provider"}),c=x(n)):(C(e,"message",a),l="postMessage"in e.parent?e.parent:e.parent.document,l.postMessage(n.channel+"-ready",u),o(function(){s.up.callback(!0)},0))},init:function(){p(s.onDOMReady,s)}}},H.stack.FrameElementTransport=function(r){var a,i,s,c;return a={outgoing:function(e,n,t){s.call(this,e),t&&t()},destroy:function(){i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){c=g(r.remote),r.isHost?(_(r.props,{src:y(r.remote,{xdm_e:g(t.href),xdm_c:r.channel,xdm_p:5}),name:B+r.channel+"_provider"}),i=x(r),i.fn=function(e){return delete i.fn,s=e,o(function(){a.up.callback(!0)},0),function(e){a.up.incoming(e,c)}}):(n.referrer&&g(n.referrer)!=z.xdm_e&&(e.top.location=z.xdm_e),s=e.frameElement.fn(function(e){a.up.incoming(e,c)}),a.up.callback(!0))},init:function(){p(a.onDOMReady,a)}}},H.stack.NameTransport=function(e){function n(n){var t=e.remoteHelper+(s?"#_3":"#_2")+e.channel;c.contentWindow.sendMessage(n,t)}function t(){s?2!==++u&&s||i.up.callback(!0):(n("ready"),i.up.callback(!0))}function r(e){i.up.incoming(e,f)}function a(){d&&o(function(){d(!0)},0)}var i,s,c,l,u,d,f,h;return i={outgoing:function(e,t,o){d=o,n(e)},destroy:function(){c.parentNode.removeChild(c),c=null,s&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){s=e.isHost,u=0,f=g(e.remote),e.local=v(e.local),s?(H.Fn.set(e.channel,function(n){s&&"ready"===n&&(H.Fn.set(e.channel,r),t())}),h=y(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),_(e.props,{src:h+"#"+e.channel,name:B+e.channel+"_provider"}),l=x(e)):(e.remoteHelper=e.remote,H.Fn.set(e.channel,r));var n=function(){var r=c||this;N(r,"load",n),H.Fn.set(e.channel+"_load",a),function i(){"function"==typeof r.contentWindow.sendMessage?t():o(i,50)}()};c=x({props:{src:e.local+"#_4"+e.channel},onLoad:n})},init:function(){p(i.onDOMReady,i)}}},H.stack.HashTransport=function(n){function t(e){if(m){var t=n.remote+"#"+f++ +"_"+e;(c||!v?m.contentWindow:m).location=t}}function r(e){d=e,s.up.incoming(d.substring(d.indexOf("_")+1),y)}function a(){if(h){var e=h.location.href,n="",t=e.indexOf("#");-1!=t&&(n=e.substring(t)),n&&n!=d&&r(n)}}function i(){l=setInterval(a,u)}var s,c,l,u,d,f,h,m,v,y;return s={outgoing:function(e,n){t(e)},destroy:function(){e.clearInterval(l),(c||!v)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){if(c=n.isHost,u=n.interval,d="#"+n.channel,f=0,v=n.useParent,y=g(n.remote),c){if(_(n.props,{src:n.remote,name:B+n.channel+"_provider"}),v)n.onLoad=function(){h=e,i(),s.up.callback(!0)};else{var t=0,r=n.delay/50;!function a(){if(++t>r)throw new Error("Unable to reference listenerwindow");try{h=m.contentWindow.frames[B+n.channel+"_consumer"]}catch(e){}h?(i(),s.up.callback(!0)):o(a,50)}()}m=x(n)}else h=e,i(),v?(m=parent,s.up.callback(!0)):(_(n,{props:{src:n.remote+"#"+n.channel+new Date,name:B+n.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),m=x(n))},init:function(){p(s.onDOMReady,s)}}},H.stack.ReliableBehavior=function(e){var n,t,o=0,r=0,a="";return n={incoming:function(e,i){var s=e.indexOf("_"),c=e.substring(0,s).split(",");e=e.substring(s+1),c[0]==o&&(a="",t&&t(!0)),e.length>0&&(n.down.outgoing(c[1]+","+o+"_"+a,i),r!=c[1]&&(r=c[1],n.up.incoming(e,i)))},outgoing:function(e,i,s){a=e,t=s,n.down.outgoing(r+","+ ++o+"_"+e,i)}}},H.stack.QueueBehavior=function(e){function n(){if(e.remove&&0===s.length)return void T(t);if(!c&&0!==s.length&&!i){c=!0;var r=s.shift();t.down.outgoing(r.data,r.origin,function(e){c=!1,r.callback&&o(function(){r.callback(e)},0),n()})}}var t,i,s=[],c=!0,l="",u=0,p=!1,d=!1;return t={init:function(){w(e)&&(e={}),e.maxLength&&(u=e.maxLength,d=!0),e.lazy?p=!0:t.down.init()},callback:function(e){c=!1;var o=t.up;n(),o.callback(e)},incoming:function(n,o){if(d){var a=n.indexOf("_"),i=parseInt(n.substring(0,a),10);l+=n.substring(a+1),0===i&&(e.encode&&(l=r(l)),t.up.incoming(l,o),l="")}else t.up.incoming(n,o)},outgoing:function(o,r,i){e.encode&&(o=a(o));var c,l=[];if(d){for(;0!==o.length;)c=o.substring(0,u),o=o.substring(c.length),l.push(c);for(;c=l.shift();)s.push({data:l.length+"_"+c,origin:r,callback:0===l.length?i:null})}else s.push({data:o,origin:r,callback:i});p?t.down.init():n()},destroy:function(){i=!0,t.down.destroy()}}},H.stack.VerifyBehavior=function(e){function n(){o=Math.random().toString(16).substring(2),t.down.outgoing(o)}var t,o,r;return t={incoming:function(a,i){var s=a.indexOf("_");-1===s?a===o?t.up.callback(!0):r||(r=a,e.initiate||n(),t.down.outgoing(a)):a.substring(0,s)===r&&t.up.incoming(a.substring(s+1),i)},outgoing:function(e,n,r){t.down.outgoing(o+"_"+e,n,r)},callback:function(t){e.initiate&&n()}}},H.stack.RpcBehavior=function(e,n){function t(e){e.jsonrpc="2.0",a.down.outgoing(i.stringify(e))}function o(e,n){var o=Array.prototype.slice;return function(){var r,a=arguments.length,i={method:n};a>0&&"function"==typeof arguments[a-1]?(a>1&&"function"==typeof arguments[a-2]?(r={success:arguments[a-2],error:arguments[a-1]},i.params=o.call(arguments,0,a-2)):(r={success:arguments[a-1]},i.params=o.call(arguments,0,a-1)),l[""+ ++s]=r,i.id=s):i.params=o.call(arguments,0),e.namedParams&&1===i.params.length&&(i.params=i.params[0]),t(i)}}function r(e,n,o,r){if(!o)return void(n&&t({id:n,error:{code:-32601,message:"Procedure not found."}}));var a,i;n?(a=function(e){a=I,t({id:n,result:e})},i=function(e,o){i=I;var r={id:n,error:{code:-32099,message:e}};o&&(r.error.data=o),t(r)}):a=i=I,c(r)||(r=[r]);try{var s=o.method.apply(o.scope,r.concat([a,i]));w(s)||a(s)}catch(l){i(l.message)}}var a,i=n.serializer||G(),s=0,l={};return a={incoming:function(e,o){var a=i.parse(e);if(a.method)n.handle?n.handle(a,t):r(a.method,a.id,n.local[a.method],a.params);else{var s=l[a.id];a.error?s.error&&s.error(a.error):s.success&&s.success(a.result),delete l[a.id]}},init:function(){if(n.remote)for(var t in n.remote)n.remote.hasOwnProperty(t)&&(e[t]=o(n.remote[t],t));a.down.init()},destroy:function(){for(var t in n.remote)n.remote.hasOwnProperty(t)&&e.hasOwnProperty(t)&&delete e[t];a.down.destroy()}}},P.easyXDM=H}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent)},{}],2:[function(e,n,t){var o=function(e,n){var t=this;this.baseUrl=n||"//login.xsolla.com/api/",this.projectId=e,this.makeApiCall=function(e,n,o){var r=new XMLHttpRequest;r.withCredentials=!0,r.open(e.method,t.baseUrl+e.endpoint,!0),r.onreadystatechange=function(){4==r.readyState&&(200==r.status?n(JSON.parse(r.responseText)):o(r.responseText?JSON.parse(r.responseText):{error:{message:"Networking error",code:r.status}}))},"POST"==e.method?(r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(e.postBody)):"GET"==e.method&&r.send(e.getArguments)}};o.prototype.getSocialsURLs=function(e,n,t){var o="";for(var r in t)""!=o&&(o+="&"),o+=r+"="+encodeURIComponent(t[r]);return this.makeApiCall({method:"GET",endpoint:"social/login_urls?"+o,getArguments:null},e,n)},o.prototype.loginPassAuth=function(e,n,t,o,r,a){var i={username:e,password:n,remember_me:t};return this.makeApiCall({method:"POST",endpoint:"proxy/login?projectId="+this.projectId+"&redirect_url="+encodeURIComponent(o),postBody:JSON.stringify(i)},r,a)},o.prototype.smsAuth=function(e,n,t){return this.makeApiCall({method:"GET",endpoint:"sms",getArguments:"phoneNumber="+e},n,t)},n.exports=o},{}],main:[function(e,n,t){function o(e){function n(e){if(e.attributes["data-xl-auth"])return e;for(var n=0;(e=e.parentElement)&&!e.attributes["data-xl-auth"]&&++n<t._options.maxXLClickDepth;);return e}var t=this;t._socialUrls={},t._options={},t._options.errorHandler=e.errorHandler||function(e){},t._options.loginPassValidator=e.loginPassValidator||function(e,n){return!0},t._options.isMarkupSocialsHandlersEnabled=e.isMarkupSocialsHandlersEnabled||!1,t._options.redirectUrl=e.redirectUrl||void 0,t._options.apiUrl=e.apiUrl||"//login.xsolla.com/api/",t._options.maxXLClickDepth=e.maxXLClickDepth||20,t._options.onlyWidgets=e.onlyWidgets||!1,t._options.projectId=e.projectId,t._options.locale=e.locale||"en";var o={};if(o.projectId=e.projectId,t._options.redirectUrl&&(o.redirect_url=t._options.redirectUrl),t._api=new r(e.projectId,t._options.apiUrl),!t._options.onlyWidgets){var a=function(){t._api.getSocialsURLs(function(e){t._socialUrls={};for(var n in e)e.hasOwnProperty(n)&&(t._socialUrls["sn-"+n]=e[n])},function(e){console.error(e)},o)};a(),setInterval(a,354e4);{t.getAllElementsWithAttribute("data-xl-auth")}t._options.isMarkupSocialsHandlersEnabled&&document.addEventListener("click",function(e){var o=n(e.target);if(o){var r=o.attributes["data-xl-auth"];if(r){var a=r.nodeValue;a&&t.login({authType:a})}}})}}var r=e("./xlapi");e("./easyXDM"),o.prototype.login=function(e,n,t){var r=this;if(e&&r._socialUrls&&e.authType)if(e.authType.startsWith("sn-")){var a=r._socialUrls[e.authType];void 0!=a?window.location.href=r._socialUrls[e.authType]:console.error("Auth type: "+e.authType+" doesn't exist")}else"login-pass"==e.authType?r._api.loginPassAuth(e.login,e.pass,e.rememberMe,r._options.redirectUrl,function(e){if(e.login_url){var a=function(){window.location.href=e.login_url};t?t({status:"success",finish:a,redirectUrl:e.login_url}):a()}else n(r.createErrorObject("Login or pass not valid",o.INCORRECT_LOGIN_OR_PASSWORD_ERROR_CODE))},function(e){n(e)}):"sms"==e.authType?"phone"==smsAuthStep?r._api.smsAuth(e.phoneNumber,null,null):"code"==smsAuthStep:console.error("Unknown auth type")},o.prototype.sendSms=function(e,n,t){},o.prototype.getAllElementsWithAttribute=function(e){for(var n=[],t=document.getElementsByTagName("*"),o=0,r=t.length;r>o;o++)null!==t[o].getAttribute(e)&&n.push(t[o]);return n},o.prototype.createErrorObject=function(e,n){return{error:{message:e,code:n||-1}}},o.getProjectId=function(){return window.__xl._options.projectId},o.getRedirectURL=function(){return window.__xl._options.redirectUrl},o.init=function(e){if(window.__xl)console.error("XL already init!");else{var n=new o(e);window.__xl=n}},o.login=function(e,n,t){window.__xl?window.__xl.login(e,n,t):console.error("Please run XL.init() first")},o.AuthWidget=function(e,n){if(window.__xl)if(e){void 0==n&&(n={});var t=n.width||200,r=n.height||400,a="http://localhost:8080/home/?projectId="+o.getProjectId()+"&locale="+window.__xl._options.locale,i=o.getRedirectURL();i&&(a=a+"&redirectUrl="+encodeURIComponent(i));var s=document.createElement("iframe");s.onload=function(){l.removeChild(c),s.style.width=t+"px",s.style.height=r+"px"},s.style.width=0,s.style.height=0,s.frameBorder="0",s.src=a;var c=document.createElement("div");c.innerHTML="Loading...";var l=document.getElementById(e);l?(l.appendChild(c),l.appendChild(s)):console.error('Element "'+e+'" not found!')}else console.error("No div name!");else console.error("Please run XL.init() first")},o.AuthButton=function(e,n){},o.INVALID_LOGIN_ERROR_CODE=1,o.INCORRECT_LOGIN_OR_PASSWORD_ERROR_CODE=2,n.exports=o},{"./easyXDM":1,"./xlapi":2}]},{},["main"])("main")});
//# sourceMappingURL=xl.min.js.map